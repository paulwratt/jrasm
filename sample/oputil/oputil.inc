;;;=============================================================================
;;; oputil.inc
;;;=============================================================================
	.cseg
	
;;;-----------------------------------------------------------------------------
;;; ldmb.a
;;;-----------------------------------------------------------------------------
ldmb.a:
	.macro	memb
	staa	memb
	.end

;;;-----------------------------------------------------------------------------
;;; ldmb.b
;;;-----------------------------------------------------------------------------
ldmb.b:
	.macro	memb
	stab	memb
	.end

;;;-----------------------------------------------------------------------------
;;; ldmb
;;;-----------------------------------------------------------------------------
ldmb:
	.macro	memb,numb
	ldaa	numb
	ldmb.a	memb
	.end

;;;-----------------------------------------------------------------------------
;;; ldmw.x
;;;-----------------------------------------------------------------------------
ldmw.x:
	.macro	memw
	stx	memw
	.end
;;;-----------------------------------------------------------------------------
;;; ldmw
;;;-----------------------------------------------------------------------------
ldmw:
	.macro	memw,numw
	ldx	numw
	ldmw.x	memw
	.end

;;;-----------------------------------------------------------------------------
;;; addmb.a
;;;-----------------------------------------------------------------------------
addmb.a:
	.macro	memb
	adda	memb
	staa	memb
	.end

;;;-----------------------------------------------------------------------------
;;; addmb.mb
;;;-----------------------------------------------------------------------------
addmb.mb:
	.macro	memb,numb
	ldaa	numb
	addmb.a	memb
	.end

;;;-----------------------------------------------------------------------------
;;; addmb
;;;-----------------------------------------------------------------------------
addmb:
	.macro	memb,numb
	addmb.mb memb,numb
	.end

;;;-----------------------------------------------------------------------------
;;; addmw.a
;;;-----------------------------------------------------------------------------
addmw.a:
	.macro	memw
	adda	memw <+> [2,1]
	staa	memw <+> [2,1]
	ldaa	0
	adca	memw <+> [2,0]
	staa	memw <+> [2,0]
	.end

;;;-----------------------------------------------------------------------------
;;; addmw.mb
;;;-----------------------------------------------------------------------------
addmw.mb:
	.macro	memw,numb
	ldaa	numb
	addmw.a	memw
	.end

;;;-----------------------------------------------------------------------------
;;; addmw.mw
;;;-----------------------------------------------------------------------------
addmw.mw:
	.macro	memw,numw
	ldaa	numw <+> [2,1]
	adda	memw <+> [2,1]
	staa	memw <+> [2,1]
	ldaa	numw <+> [2,0]
	adca	memw <+> [2,0]
	staa	memw <+> [2,0]
	.end

;;;-----------------------------------------------------------------------------
;;; addx.a
;;;-----------------------------------------------------------------------------
addx.a:
	.macro
	stx	[result]
	addmw.a [result]
result:
	.equ	$+1
	ldx	0x0000
	.end

;;;-----------------------------------------------------------------------------
;;; addx.mb
;;;-----------------------------------------------------------------------------
addx.mb:
	.macro	numb
	stx	[result]
	addmw.mb [result],numb
result:
	.equ	$+1
	ldx	0x0000
	.end

;;;-----------------------------------------------------------------------------
;;; addx.mw
;;;-----------------------------------------------------------------------------
addx.mw:
	.macro	numw
	stx	[result]
	addmw.mw [result],numw
result:
	.equ	$+1
	ldx	0x0000
	.end

;;;-----------------------------------------------------------------------------
;;; submb.a
;;;-----------------------------------------------------------------------------
submb.a:
	.macro	memb
	suba	memb
	nega
	staa	memb
	.end

;;;-----------------------------------------------------------------------------
;;; submb.mb
;;;-----------------------------------------------------------------------------
submb.mb:
	.macro	memb,numb
	ldaa	memb
	suba	numb
	staa	memb
	.end

submb:
	.macro	memb,numb
	submb.mb memb,numb
	.end

;;;-----------------------------------------------------------------------------
;;; submw.a
;;;-----------------------------------------------------------------------------
submw.a:
	.macro	memw
	ldab	memw <+> [2,1]
	staa	memw <+> [2,1]
	subb	memw <+> [2,1]
	stab	memw <+> [2,1]
	ldaa	memw <+> [2,0]
	sbca	0
	staa	memw <+> [2,0]
	.end

;;;-----------------------------------------------------------------------------
;;; submw.mb
;;;-----------------------------------------------------------------------------
submw.mb:
	.macro	memw,numb
	ldaa	memw <+> [2,1]
	suba	numb
	staa	memw <+> [2,1]
	ldaa	memw <+> [2,0]
	sbca	0
	staa	memw <+> [2,0]
	.end

;;;-----------------------------------------------------------------------------
;;; submw.mw
;;;-----------------------------------------------------------------------------
submw.mw:
	.macro	memw,numw
	ldaa	memw <+> [2,1]
	suba	numw <+> [2,1]
	staa	memw <+> [2,1]
	ldaa	memw <+> [2,0]
	sbca	numw <+> [2,0]
	staa	memw <+> [2,0]
	.end

;;;-----------------------------------------------------------------------------
;;; subx.a
;;;-----------------------------------------------------------------------------
subx.a:
	.macro
	stx	[result]
	submw.a [result]
result:
	.equ	$+1
	ldx	0x0000
	.end

;;;-----------------------------------------------------------------------------
;;; subx.mb
;;;-----------------------------------------------------------------------------
subx.mb:
	.macro	numb
	stx	[result]
	submw.mb [result],numb
result:
	.equ	$+1
	ldx	0x0000
	.end

;;;-----------------------------------------------------------------------------
;;; subx.mw
;;;-----------------------------------------------------------------------------
subx.mw:
	.macro	numw
	stx	[result]
	submw.mw [result],numw
result:
	.equ	$+1
	ldx	0x0000
	.end
	
